<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <record id="view_rfp_form" model="ir.ui.view">
        <field name="name">rfp.request.form</field>
        <field name="model">rfp.request</field>
        <field name="arch" type="xml">
            <form string="Request for Purchase">
                <header>
                <!-- reviewer button -->
                    <button name="action_submit_rfp" type="object" 
                        string="Submit" class="oe_highlight" group="supplier_management.group_supplier_management_reviewer"
                        invisible="status != 'draft'"/>
                    <button name="action_return_to_draft_rfp" type="object" string="Return to Draft" class="oe_highlight"
                        group="supplier_management.group_supplier_management_reviewer"
                        invisible="status != 'submitted'"/>
                <!-- approver button -->
                    <button name="action_approve_rfp" type="object" string="Approve" class="oe_highlight" 
                        group="supplier_management.group_supplier_management_approver"
                        invisible="status != 'submitted'"/>
                    
                    <button name="action_reject_rfp" type="object" string="Reject" 
                        class="oe_highlight" group="supplier_management.group_supplier_management_approver"
                        invisible="status != 'submitted' and status != 'approved'"/>
                        <!-- /> -->
                    <button name="action_close_rfp" type="object" string="Close" class="oe_highlight"
                         invisible="status != 'approved'"/>
                    <button name="action_accept_rfp" type="object" string="Accept" class="oe_highlight" 
                        invisible="status != 'recommanded'"/>
                    <field name='status' widget='statusbar'/> 
                </header>
                <sheet>
                    <group>
                        <group name="rfp_details">
                            <field name="create_uid" string="Created By" readonly="1"/>
                            <field name="rfp_number"/>
                            <field name="status"/>
                            <field name="required_date"/>
                        
                        </group>
                    </group>
                    <notebook>
                        <page string="Product Lines">
                            <field name="product_line_ids" readonly="status not in ('draft',)">
                                <tree editable="bottom">
                                    
                                    <field name="product_id"/>
                                    <field name="description"/>
                                    <field name="quantity"/>
                                    
                                </tree>
                            </field>
                        </page>
                        <page string="RFQ Lines">
                            <field name="rfq_lines">
                                <tree >
                                    <field name="company_id" invisible="1"/>
                                    <field name="partner_id"/>
                                    <field name="amount_total"/>
                                    <field name= "notes"/>
                                    <field name="date_order"/>
                                    <field name="score"/>
                                </tree>
                                <form string="RFQ Line">
                                    <group>
                                        <field name="company_id" invisible="1"/>
                                        <field name="partner_id"/>
                                        <field name="amount_total"/>
                                        <field name="notes"/>
                                        <field name="date_order"/>
                                        <field name="score"/>
                                        <field name="recommended" groups="supplier_management.group_supplier_management_reviewer"/>
                                    </group>
                                    <notebook>
                                    <page string="Product Line Details">
                                        <field name="order_line">
                                            <tree editable="bottom">
                                                <field name="product_id"/>
                                                <field name="product_qty"/>
                                                <field name="price_unit"/>
                                                <field name="delivery_charge"/> 
                                                <field name="price_total"/>
                                            </tree>
                                        </field>
                                    </page>
                                    </notebook>
                                </form>
                            
                            </field>
                        </page>
                    </notebook>
                </sheet>
                <div class="oe_chatter">
                <!-- Chatter will be displayed here -->
                    <field name="message_follower_ids" widget="mail_followers"/>
                    <field name="activity_ids" widget="mail_activity"/>
                    <field name="message_ids" widget="mail_thread"/>
                </div>
            </form>
        </field>
    </record>
    <record id="view_rfp_tree" model="ir.ui.view">
        <field name="name">rfp.request.tree</field>
        <field name="model">rfp.request</field>
        <field name="arch" type="xml">
            <tree>
                <field name="rfp_number"/>
                <field name="status"/>
                <field name="required_date"/>
                <field name="total_amount"/>
                <field name="approved_supplier_id"/>
            </tree>
        </field>
    </record>

    <record id="action_rfp_request" model="ir.actions.act_window">
        <field name="name">Requests for Purchase</field>
        <field name="res_model">rfp.request</field>
        <field name="view_mode">tree,form</field>
        <field name="view_id" ref="view_rfp_tree"/>
    </record>
    
              
</odoo>

    